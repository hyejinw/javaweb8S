<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.javaweb8S.dao.AdminDAO">

	<select id="getBookIsbn" resultType="com.spring.javaweb8S.vo.BookVO">
		SELECT * FROM bo_book WHERE isbn = #{isbn};
	</select>

	<select id="getDefaultPhoto" resultType="com.spring.javaweb8S.vo.DefaultPhotoVO">
		SELECT * FROM bo_defaultPhoto ORDER BY idx DESC;
	</select>
	
	<select id="getProverb" resultType="com.spring.javaweb8S.vo.ProverbVO">
		SELECT * FROM bo_proverb ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
	</select>
	
	<select id="proverbTotRecCnt" resultType="int">
		SELECT count(*) FROM bo_proverb;
	</select>
	
	<select id="bookTotRecCnt" resultType="int">
		SELECT count(*) FROM bo_book;
	</select>
	
	<select id="getBooks" resultType="com.spring.javaweb8S.vo.BookVO">
		SELECT * FROM bo_book ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
	</select>
	
	<select id="bookTotRecCntSearch" resultType="int">
		SELECT count(*) FROM bo_book WHERE ${search} LIKE CONCAT('%',#{searchString},'%');
	</select>

	<select id="getDBBooks" resultType="com.spring.javaweb8S.vo.BookVO">
		SELECT * FROM bo_book WHERE ${search} LIKE CONCAT('%',#{searchString},'%') ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
	</select>
	
	<select id="magazineTotRecCnt" resultType="int">
		SELECT count(*) FROM bo_magazine;
	</select>
	
	<select id="getMagazineList" resultType="com.spring.javaweb8S.vo.MagazineVO">
		SELECT * FROM bo_magazine ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
	</select>
	
	<select id="magazineTotRecCntWithPeriod" resultType="int">
		<if test='searchString != "" and startDate == ""'>
			SELECT count(*) FROM bo_magazine WHERE ${search} LIKE CONCAT('%',#{searchString},'%');
		</if>
		<if test='searchString == "" and startDate != ""'>
			SELECT count(*) FROM bo_magazine WHERE date_format(maDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate};
		</if>
		<if test='searchString != "" and startDate != ""'>
			SELECT count(*) FROM bo_magazine WHERE ${search} LIKE CONCAT('%',#{searchString},'%') AND date_format(maDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate};
		</if>
	</select>
	
	<select id="getMagazineSearchList" resultType="com.spring.javaweb8S.vo.MagazineVO">
		<if test='searchString != "" and startDate == ""'>
			SELECT * FROM bo_magazine WHERE ${search} LIKE CONCAT('%',#{searchString},'%') 
			ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString == "" and startDate != ""'>
			SELECT * FROM bo_magazine WHERE date_format(maDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate} 
			ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString != "" and startDate != ""'>
			SELECT * FROM bo_magazine WHERE ${search} LIKE CONCAT('%',#{searchString},'%') and date_format(maDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate} 
			ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
	</select>
	
	<select id="magazineTypeTotRecCnt" resultType="int">
		SELECT count(*) FROM bo_magazine WHERE maType = #{maType};
	</select>
	
	<select id="getMagazineTypeList" resultType="com.spring.javaweb8S.vo.MagazineVO">
		SELECT * FROM bo_magazine WHERE maType = #{maType} ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
	</select>
	
	<select id="getMagazine" resultType="com.spring.javaweb8S.vo.MagazineVO">
		SELECT * FROM bo_magazine WHERE idx = #{idx};
	</select>
	
	<select id="getMagazinePhotoName" resultType="com.spring.javaweb8S.vo.MagazineVO">
		SELECT maDetail,maThumbnail FROM bo_magazine WHERE idx in 
   	<foreach collection="magazineList" item="magazineList" open="(" close=")" separator=",">
   		#{magazineList}
    </foreach>
	</select>
	
	<select id="colCategoryTotRecCnt" resultType="int">
		SELECT count(*) FROM bo_collection;
	</select>
	
	<select id="getColCategoryList" resultType="com.spring.javaweb8S.vo.CollectionVO">
		SELECT * FROM bo_collection ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
	</select>
	
	<select id="getColCategories" resultType="com.spring.javaweb8S.vo.CollectionVO">
		SELECT * FROM bo_collection ORDER BY idx DESC;
	</select>
	
	<select id="getProdCode" resultType="String">
		SELECT prodCode FROM bo_product WHERE colIdx = #{colIdx} and prodName = #{prodName} and prodPrice = #{prodPrice};
	</select>
	
	<select id="colProductTotRecCnt" resultType="int">
		SELECT count(*) FROM bo_product;
	</select>
	
	<select id="getColProductList" resultType="com.spring.javaweb8S.vo.ProductVO">
		SELECT p.*, c.colName FROM bo_product as p, bo_collection as c ORDER BY idx DESC;
	</select>
	
	<select id="getProductInfo" resultType="com.spring.javaweb8S.vo.ProductVO">
		SELECT * FROM bo_product WHERE idx = #{idx};
	</select>
	
	<select id="getProdOption" resultType="com.spring.javaweb8S.vo.OptionVO">
		SELECT * FROM bo_option WHERE prodIdx = #{idx};
	</select>
	
	<select id="getProductPhotoName" resultType="com.spring.javaweb8S.vo.ProductVO">
		SELECT prodDetail,prodThumbnail FROM bo_product WHERE idx in
   	<foreach collection="colProdList" item="colProdList" open="(" close=")" separator=",">
   		#{colProdList}
    </foreach>
	</select>
	
	<select id="colProdTotRecCntWithPeriod" resultType="int">
		<if test='searchString == "" and startDate == ""'>
			SELECT count(*) FROM bo_product 
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				WHERE prodStatus = #{sort}
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				WHERE prodOpen = #{sort}
			</if>
			;
		</if>
		<if test='searchString != "" and startDate == ""'>
			SELECT count(*) FROM bo_product WHERE 
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				prodStatus = #{sort} and 
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				prodOpen = #{sort} and 
			</if>
			
			${search} LIKE CONCAT('%',#{searchString},'%');
		</if>
		<if test='searchString == "" and startDate != ""'>
			SELECT count(*) FROM bo_product WHERE
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				prodStatus = #{sort} and 
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				prodOpen = #{sort} and 
			</if> 
			
			date_format(prodDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate};
		</if>
		<if test='searchString != "" and startDate != ""'>
			SELECT count(*) FROM bo_product WHERE 
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				prodStatus = #{sort} and 
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				prodOpen = #{sort} and 
			</if>
			
			${search} LIKE CONCAT('%',#{searchString},'%') and date_format(prodDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate};
		</if>
	</select>
	
	<select id="getColProdSearchList" resultType="com.spring.javaweb8S.vo.ProductVO">
		<if test='searchString == "" and startDate == ""'>
			SELECT * FROM bo_product 
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				WHERE prodStatus = #{sort}
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				WHERE prodOpen = #{sort}
			</if>
			
			ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString != "" and startDate == ""'>
			SELECT * FROM bo_product WHERE 
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				prodStatus = #{sort} and 
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				prodOpen = #{sort} and 
			</if>
			
			${search} LIKE CONCAT('%',#{searchString},'%')
			ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString == "" and startDate != ""'>
			SELECT * FROM bo_product WHERE 
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				prodStatus = #{sort} and 
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				prodOpen = #{sort} and 
			</if>
			
			date_format(prodDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate}
			ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString != "" and startDate != ""'>
			SELECT * FROM bo_product WHERE 
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				prodStatus = #{sort} AND 
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				prodOpen = #{sort} AND 
			</if>			
			
			${search} LIKE CONCAT('%',#{searchString},'%') AND date_format(prodDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate}
			ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
	</select>
	
	<!-- 컬렉션 명으로 검색 -->
	<select id="colProdColNameTotRecCntWithPeriod" resultType="int">
		<if test='searchString == "" and startDate == ""'>
			SELECT count(*) FROM bo_product 
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				WHERE prodStatus = #{sort}
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				WHERE prodOpen = #{sort}
			</if>
			;
		</if>
		<if test='searchString != "" and startDate == ""'>
			SELECT count(*) 
			FROM bo_product p 
			LEFT JOIN bo_collection c 
			on p.colIdx = c.idx WHERE 
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				p.prodStatus = #{sort} and 
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				p.prodOpen = #{sort} and 
			</if>
			
			c.${search} LIKE CONCAT('%',#{searchString},'%');
		</if>
		<if test='searchString == "" and startDate != ""'>
			SELECT count(*) FROM bo_product WHERE
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				prodStatus = #{sort} and 
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				prodOpen = #{sort} and 
			</if> 
			
			date_format(prodDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate};
		</if>
		<if test='searchString != "" and startDate != ""'>
			SELECT count(*) 
			FROM bo_product p 
			LEFT JOIN bo_collection c 
			on p.colIdx = c.idx WHERE 
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				p.prodStatus = #{sort} and 
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				p.prodOpen = #{sort} and 
			</if>
			
			c.${search} LIKE CONCAT('%',#{searchString},'%') and date_format(p.prodDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate};
		</if>
	</select>
	
		
	<select id="getColNameProdSearchList" resultType="com.spring.javaweb8S.vo.ProductVO">
		<if test='searchString == "" and startDate == ""'>
			SELECT * FROM bo_product 
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				WHERE prodStatus = #{sort}
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				WHERE prodOpen = #{sort}
			</if>
			
			ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString != "" and startDate == ""'>
			SELECT * 
			FROM bo_product p 
			LEFT JOIN bo_collection c 
			on p.colIdx = c.idx WHERE 
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				p.prodStatus = #{sort} and 
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				p.prodOpen = #{sort} and 
			</if>
			
			c.${search} LIKE CONCAT('%',#{searchString},'%')
			ORDER BY p.idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString == "" and startDate != ""'>
			SELECT * FROM bo_product WHERE 
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				prodStatus = #{sort} and 
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				prodOpen = #{sort} and 
			</if>
			
			date_format(prodDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate}
			ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString != "" and startDate != ""'>
			SELECT * 
			FROM bo_product p 
			LEFT JOIN bo_collection c 
			on p.colIdx = c.idx WHERE
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				p.prodStatus = #{sort} and 
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				p.prodOpen = #{sort} and 
			</if>			
			
			c.${search} LIKE CONCAT('%',#{searchString},'%') and date_format(p.prodDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate}
			ORDER BY p.idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
	</select>
	
	<select id="orderTotRecCnt" resultType="int">
		SELECT count(*) FROM bo_order;
	</select>
	
	<select id="getOrderList" resultType="com.spring.javaweb8S.vo.OrderVO">
		SELECT * FROM bo_order ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
	</select>
	
	<select id="getOrderInfo" resultType="com.spring.javaweb8S.vo.OrderVO">
		SELECT * FROM bo_order WHERE idx = #{idx};
	</select>
	
	<select id="getDeliveryInfo" resultType="com.spring.javaweb8S.vo.DeliveryVO">
		SELECT * FROM bo_delivery WHERE orderIdx = #{idx};
	</select>
	
	<select id="getMemberInfo" resultType="com.spring.javaweb8S.vo.MemberVO">
		SELECT * FROM bo_member WHERE nickname = #{memNickname};
	</select>
	
	<select id="getAddressInfo" resultType="com.spring.javaweb8S.vo.AddressVO">
		SELECT * FROM bo_address WHERE idx = #{addressIdx};
	</select>
	
	<select id="getSubDeliveryInfo" resultType="com.spring.javaweb8S.vo.DeliveryVO">
		SELECT * FROM bo_delivery WHERE orderIdx = #{idx};
	</select>
	
	<select id="getSubscribeInfo" resultType="com.spring.javaweb8S.vo.SubscribeVO">
		SELECT * FROM bo_subscribe WHERE orderIdx = #{idx};
	</select>
	
	<select id="orderTotRecCntWithPeriod" resultType="int">
		<if test='searchString == "" and startDate == ""'>
			SELECT count(*) FROM bo_order 
			
			<if test='sort != "" and sort != "전체"'>
				WHERE orderStatus = #{sort}
			</if>
			;
		</if>
		<if test='searchString != "" and startDate == ""'>
			SELECT count(*) FROM bo_order WHERE 
			
			<if test='sort != "" and sort != "전체"'>
				orderStatus = #{sort} and 
			</if>
			
			${search} LIKE CONCAT('%',#{searchString},'%');
		</if>
		<if test='searchString == "" and startDate != ""'>
			SELECT count(*) FROM bo_order WHERE
			
			<if test='sort != "" and sort != "전체"'>
				orderStatus = #{sort} and 
			</if> 
			
			date_format(orderDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate};
		</if>
		<if test='searchString != "" and startDate != ""'>
			SELECT count(*) FROM bo_order WHERE 
			
			<if test='sort != "" and sort != "전체"'>
				orderStatus = #{sort} and 
			</if>
			
			${search} LIKE CONCAT('%',#{searchString},'%') and date_format(orderDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate};
		</if>
	</select>
	
	<select id="getOrderSearchList" resultType="com.spring.javaweb8S.vo.OrderVO">
		<if test='searchString == "" and startDate == ""'>
			SELECT * FROM bo_order 
			
			<if test='sort != "" and sort != "전체"'>
				WHERE orderStatus = #{sort}
			</if>
			ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString != "" and startDate == ""'>
			SELECT * FROM bo_order WHERE 
			
			<if test='sort != "" and sort != "전체"'>
				orderStatus = #{sort} AND 
			</if>
			
			${search} LIKE CONCAT('%',#{searchString},'%')
			ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString == "" and startDate != ""'>
			SELECT * FROM bo_order WHERE
			
			<if test='sort != "" and sort != "전체"'>
				orderStatus = #{sort} and 
			</if> 
			
			date_format(orderDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate}
			ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString != "" and startDate != ""'>
			SELECT * FROM bo_order WHERE 
			
			<if test='sort != "" and sort != "전체"'>
				orderStatus = #{sort} and 
			</if>
			
			${search} LIKE CONCAT('%',#{searchString},'%') and date_format(orderDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate}
			ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
	</select>
	
	<!-- 송장으로 검색 -->
	<select id="orderWithInvoiceTotRecCntWithPeriod" resultType="com.spring.javaweb8S.vo.OrderVO">
<if test='searchString == "" and startDate == ""'>
			SELECT * FROM bo_order 
			
			<if test='sort != "" and sort != "전체"'>
				WHERE orderStatus = #{sort}
			</if>
			group by orderCode;
		</if>
		<if test='searchString != "" and startDate == ""'>
			SELECT *   
			FROM bo_order o
			LEFT JOIN bo_delivery d
			on o.idx = d.orderIdx
			WHERE 
			<if test='sort != "" and sort != "전체"'>
				o.orderStatus = #{sort} and 
			</if>
			
			d.${search} LIKE CONCAT('%',#{searchString},'%')
			group by o.orderCode;
		</if>
		<if test='searchString == "" and startDate != ""'>
			SELECT * FROM bo_order WHERE
			
			<if test='sort != "" and sort != "전체"'>
				orderStatus = #{sort} and 
			</if> 
			
			date_format(orderDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate}
			group by orderCode;
		</if>
		<if test='searchString != "" and startDate != ""'>
			SELECT *  
			FROM bo_order o
			LEFT JOIN bo_delivery d
			on o.idx = d.orderIdx
			WHERE  
			
			<if test='sort != "" and sort != "전체"'>
				o.orderStatus = #{sort} and 
			</if>
			
			d.${search} LIKE CONCAT('%',#{searchString},'%') and date_format(o.orderDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate}
			group by o.orderCode;
		</if>
	</select>
	
	<select id="getOrderWithInvoiceSearchList" resultType="com.spring.javaweb8S.vo.OrderVO">
		<if test='searchString == "" and startDate == ""'>
			SELECT * FROM bo_order 
			
			<if test='sort != "" and sort != "전체"'>
				WHERE orderStatus = #{sort}
			</if>
			group by orderCode
			ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString != "" and startDate == ""'>
			SELECT *   
			FROM bo_order o
			LEFT JOIN bo_delivery d
			on o.idx = d.orderIdx
			WHERE 
			<if test='sort != "" and sort != "전체"'>
				o.orderStatus = #{sort} and 
			</if>
			
			d.${search} LIKE CONCAT('%',#{searchString},'%')
			group by o.orderCode 
			ORDER BY o.idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString == "" and startDate != ""'>
			SELECT * FROM bo_order WHERE
			
			<if test='sort != "" and sort != "전체"'>
				orderStatus = #{sort} and 
			</if> 
			
			date_format(orderDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate}
			group by orderCode
			ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString != "" and startDate != ""'>
			SELECT *  
			FROM bo_order o
			LEFT JOIN bo_delivery d
			on o.idx = d.orderIdx
			WHERE  
			
			<if test='sort != "" and sort != "전체"'>
				o.orderStatus = #{sort} and 
			</if>
			
			d.${search} LIKE CONCAT('%',#{searchString},'%') and date_format(o.orderDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate}
			group by o.orderCode
			ORDER BY o.idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
	</select>
	
	
	
	
	
	
	<insert id="memberDefaultPhotoInsert">
		INSERT INTO bo_defaultPhoto VALUES (default, #{vo.photoName}, #{vo.memo}, default); 
	</insert>

	<insert id="setProverb">
		INSERT INTO bo_proverb VALUES (default, #{vo.content}, #{vo.origin}); 
	</insert>
	
	<insert id="setBook">
		INSERT INTO bo_book VALUES(default,#{vo.title},#{vo.contents},#{vo.url},#{vo.isbn},#{vo.datetime},#{vo.authors},#{vo.publisher},
		#{vo.translators},#{vo.price},#{vo.sale_price},#{vo.thumbnail},#{vo.status},default,default,default);
	</insert>

<!-- 됨 
	<insert id="setMagazineInsert" parameterType="com.spring.javaweb8S.vo.MagazineVO">
 		<if test="vo.maStock eq null">
			INSERT INTO bo_magazine VALUES(default,#{vo.maCode},#{vo.maType},#{vo.maTitle},#{vo.maPrice},#{vo.maThumbnail},#{vo.maDetail},default,default,default,default,default);
		</if>
		<if test="vo.maStock neq null">
			INSERT INTO bo_magazine VALUES(default,#{vo.maCode},#{vo.maType},#{vo.maTitle},#{vo.maPrice},#{vo.maThumbnail},#{vo.maDetail},#{vo.maDate},#{vo.maStock},#{vo.maSaleQuantity},default,default);
		</if> 
	</insert>	 -->
<!-- 	안 됨 
 	<insert id="setMagazineInsert" parameterType="com.spring.javaweb8S.vo.MagazineVO">
 		<if test="vo.maType != null and 'vo.maType.equals(정기 구독)'">
			INSERT INTO bo_magazine VALUES(default,#{vo.maCode},#{vo.maType},#{vo.maTitle},#{vo.maPrice},#{vo.maThumbnail},#{vo.maDetail},default,default,default,default,default);
		</if>
		<if test="vo.maType != null and 'vo.maType.equals(매거진)'">
			INSERT INTO bo_magazine VALUES(default,#{vo.maCode},#{vo.maType},#{vo.maTitle},#{vo.maPrice},#{vo.maThumbnail},#{vo.maDetail},#{vo.maDate},#{vo.maStock},#{vo.maSaleQuantity},default,default);
		</if> 
	</insert>	 -->
	
 	<insert id="setMagazineInsert" parameterType="com.spring.javaweb8S.vo.MagazineVO">
 		<if test='vo.maType != null and vo.maType=="정기 구독"'>
			INSERT INTO bo_magazine VALUES(default,#{vo.maCode},#{vo.maType},#{vo.maTitle},#{vo.maPrice},#{vo.maThumbnail},#{vo.maDetail},default,default,default,default,default);
		</if>
		<if test='vo.maType != null and vo.maType=="매거진"'>
			INSERT INTO bo_magazine VALUES(default,#{vo.maCode},#{vo.maType},#{vo.maTitle},#{vo.maPrice},#{vo.maThumbnail},#{vo.maDetail},#{vo.maDate},#{vo.maStock},#{vo.maSaleQuantity},default,default);
		</if> 
	</insert>	
	
	<insert id="setColCategoryInsert">
		INSERT INTO bo_collection VALUES(default,#{vo.colName},#{vo.colDetail},#{vo.colThumbnail},default,default);
	</insert>
	
	
	<insert id="setProdInsert">
		INSERT INTO bo_product VALUES(default,#{vo.colIdx},
		
		(select idx FROM bo_book WHERE title = #{vo.bookTitle} LIMIT 1), #{vo.bookTitle},
		#{vo.prodCode},#{vo.prodName},#{vo.prodPrice},#{vo.prodReason},#{vo.prodThumbnail},#{vo.prodDetail},default,default,default,#{vo.prodStatus},default);
	</insert>
	
	<insert id="setProdOpInsert" parameterType="java.util.ArrayList">
		INSERT INTO bo_option VALUES
		<foreach item="item" index="index" collection="optionList" separator=",">
    	(default, (select idx FROM bo_product WHERE prodCode = #{prodCode}), #{item.opName}, #{item.opPrice}, #{item.opStock})       
    </foreach>
	</insert>
	
	
	<update id="setChangeMemberPhotos">
		UPDATE bo_member SET memPhoto = default WHERE memPhoto IN
   	<foreach collection="defaultPhotoList" item="defaultPhotoList" open="(" close=")" separator=",">
   		#{defaultPhotoList}
    </foreach>
	</update>
	
	<update id="setUpdateProverb">
		UPDATE bo_proverb SET content = #{vo.content}, origin = #{vo.origin} WHERE idx = #{vo.idx};
	</update>
	
 	<update id="setMagazineOpenUpdate">
		UPDATE bo_magazine SET maOpen = #{maOpen} WHERE idx = #{idx};
	</update>
	
	<update id="setMagazineUpdate" parameterType="com.spring.javaweb8S.vo.MagazineVO">
		UPDATE bo_magazine SET maType = #{vo.maType}, maTitle = #{vo.maTitle}, maPrice = #{vo.maPrice},  
 		<if test='vo.maThumbnail != null'>maThumbnail = #{vo.maThumbnail}, </if>
 		<if test='vo.maDetail != null'>maDetail = #{vo.maDetail}, </if>
 		<if test='vo.maType != null and vo.maType=="정기 구독"'>maDate = default, </if>
		<if test='vo.maType != null and vo.maType=="매거진"'>maDate = #{vo.maDate}, </if> 
		maStock = #{vo.maStock} WHERE idx = #{vo.idx};
	</update>
	
 	<update id="setColCategoryOpenUpdate">
		UPDATE bo_collection SET colOpen = #{colOpen} WHERE idx = #{idx};
	</update>
	
	<update id="setUpdateColCategory">
		UPDATE bo_collection SET colName = #{vo.colName}, colDetail = #{vo.colDetail}, colDate = #{vo.colDate} WHERE idx = #{vo.idx};
	</update>
	
	<update id="setColCategorythumbUpdate">
		UPDATE bo_collection set colThumbnail = #{vo.colThumbnail} WHERE idx = #{vo.idx};
	</update>
	
	<update id="setColProdOpenUpdate">
		UPDATE bo_product SET prodOpen = #{prodOpen} WHERE idx = #{idx};
	</update>
	
	<update id="setProdUpdate" parameterType="com.spring.javaweb8S.vo.ProductVO">
		UPDATE bo_product SET prodName = #{vo.prodName}, prodPrice = #{vo.prodPrice}, prodReason = #{vo.prodReason}
		<if test='vo.prodThumbnail != null'>, prodThumbnail = #{vo.prodThumbnail}</if>
		<if test='vo.prodDetail != null'>, prodDetail = #{vo.prodDetail}</if>
		WHERE idx = #{vo.idx};
	</update>
	
	<!-- separator="," 이 구분자가 필요하지 않다!!!!! -->
	<update id="setProdOpUpdate" parameterType="java.util.ArrayList">
		<foreach item="item" index="index" collection="optionList">
			UPDATE bo_option SET 
    	opName = #{item.opName}, opPrice = #{item.opPrice}, opStock = #{item.opStock} WHERE idx = #{item.idx};     
    </foreach>
	</update>
	
	<update id="setProdStatusUpdate">
		UPDATE bo_product SET prodStatus = #{prodStatus} WHERE idx = #{idx};
	</update>
	
	
	
	<delete id="memberDefaultPhotoDelete">
		DELETE FROM bo_defaultPhoto WHERE 1=1 AND 
		photoName IN
    <foreach collection="defaultPhotoList" item="defaultPhotoList" open="(" close=")" separator=",">
   		#{defaultPhotoList}
    </foreach>
	</delete>
	
	<delete id="setProverbDelete">
		DELETE FROM bo_proverb WHERE idx IN
    <foreach collection="proverbList" item="proverbList" open="(" close=")" separator=",">
   		#{proverbList}
    </foreach>
	</delete>
	
	<delete id="setBookDelete">
		DELETE FROM bo_book WHERE idx IN 
    <foreach collection="bookList" item="bookList" open="(" close=")" separator=",">
   		#{bookList}
    </foreach>
	</delete>

	<delete id="setMagazineDelete">
		DELETE FROM bo_magazine WHERE idx IN
    <foreach collection="magazineList" item="magazineList" open="(" close=")" separator=",">
   		#{magazineList}
    </foreach>
	</delete>
	
	<delete id="setColCategoryDelete">
		DELETE FROM bo_collection WHERE colThumbnail IN 
    <foreach collection="colCategoryList" item="colCategoryList" open="(" close=")" separator=",">
   		#{colCategoryList}
    </foreach>
	</delete>
	
	<delete id="setProdOptionDelete">
		DELETE FROM bo_option WHERE idx = #{idx};
	</delete>
	
	<delete id="setColProdDelete">
		DELETE FROM bo_product WHERE idx IN 
    <foreach collection="colProdList" item="colProdList" open="(" close=")" separator=",">
   		#{colProdList}
    </foreach>
	</delete>
	
</mapper>