<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.javaweb8S.dao.AdminDAO">

	<select id="getBookIsbn" resultType="com.spring.javaweb8S.vo.BookVO">
		SELECT * FROM bo_book WHERE isbn = #{isbn};
	</select>

	<select id="getDefaultPhoto" resultType="com.spring.javaweb8S.vo.DefaultPhotoVO">
		SELECT * FROM bo_defaultPhoto ORDER BY idx DESC;
	</select>
	
	<select id="getProverb" resultType="com.spring.javaweb8S.vo.ProverbVO">
		SELECT * FROM bo_proverb ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
	</select>
	
	<select id="proverbTotRecCnt" resultType="int">
		SELECT COUNT(*) FROM bo_proverb;
	</select>
	
	<select id="bookTotRecCnt" resultType="int">
		SELECT COUNT(*) FROM bo_book;
	</select>
	
	<select id="getBooks" resultType="com.spring.javaweb8S.vo.BookVO">
		SELECT * FROM bo_book ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
	</select>
	
	<select id="bookTotRecCntSearch" resultType="int">
		SELECT COUNT(*) FROM bo_book WHERE ${search} LIKE CONCAT('%',#{searchString},'%');
	</select>

	<select id="getDBBooks" resultType="com.spring.javaweb8S.vo.BookVO">
		SELECT * FROM bo_book WHERE ${search} LIKE CONCAT('%',#{searchString},'%') ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
	</select>
	
	<select id="magazineTotRecCnt" resultType="int">
		SELECT COUNT(*) FROM bo_magazine;
	</select>
	
	<select id="getMagazineList" resultType="com.spring.javaweb8S.vo.MagazineVO">
		SELECT * FROM bo_magazine ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
	</select>
	
	<select id="magazineTotRecCntWithPeriod" resultType="int">
		<if test='searchString != "" and startDate == ""'>
			SELECT COUNT(*) FROM bo_magazine WHERE ${search} LIKE CONCAT('%',#{searchString},'%');
		</if>
		<if test='searchString == "" and startDate != ""'>
			SELECT COUNT(*) FROM bo_magazine WHERE date_format(maDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate};
		</if>
		<if test='searchString != "" and startDate != ""'>
			SELECT COUNT(*) FROM bo_magazine WHERE ${search} LIKE CONCAT('%',#{searchString},'%') AND date_format(maDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate};
		</if>
	</select>
	
	<select id="getMagazineSearchList" resultType="com.spring.javaweb8S.vo.MagazineVO">
		<if test='searchString != "" and startDate == ""'>
			SELECT * FROM bo_magazine WHERE ${search} LIKE CONCAT('%',#{searchString},'%') 
			ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString == "" and startDate != ""'>
			SELECT * FROM bo_magazine WHERE date_format(maDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate} 
			ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString != "" and startDate != ""'>
			SELECT * FROM bo_magazine WHERE ${search} LIKE CONCAT('%',#{searchString},'%') and date_format(maDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate} 
			ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
	</select>
	
	<select id="magazineTypeTotRecCnt" resultType="int">
		SELECT COUNT(*) FROM bo_magazine WHERE maType = #{maType};
	</select>
	
	<select id="getMagazineTypeList" resultType="com.spring.javaweb8S.vo.MagazineVO">
		SELECT * FROM bo_magazine WHERE maType = #{maType} ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
	</select>
	
	<select id="getMagazine" resultType="com.spring.javaweb8S.vo.MagazineVO">
		SELECT * FROM bo_magazine WHERE idx = #{idx};
	</select>
	
	<select id="getMagazinePhotoName" resultType="com.spring.javaweb8S.vo.MagazineVO">
		SELECT maDetail,maThumbnail FROM bo_magazine WHERE idx IN 
   	<foreach collection="magazineList" item="magazineList" open="(" close=")" separator=",">
   		#{magazineList}
    </foreach>
	</select>
	
	<select id="colCategoryTotRecCnt" resultType="int">
		SELECT COUNT(*) FROM bo_collection;
	</select>
	
	<select id="getColCategoryList" resultType="com.spring.javaweb8S.vo.CollectionVO">
		SELECT * FROM bo_collection ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
	</select>
	
	<select id="getColCategories" resultType="com.spring.javaweb8S.vo.CollectionVO">
		SELECT * FROM bo_collection ORDER BY idx DESC;
	</select>
	
	<select id="getProdCode" resultType="String">
		SELECT prodCode FROM bo_product WHERE colIdx = #{colIdx} AND prodName = #{prodName} AND prodPrice = #{prodPrice};
	</select>
	
	<select id="colProductTotRecCnt" resultType="int">
		SELECT COUNT(*) FROM bo_product;
	</select>
	
	<select id="getColProductList" resultType="com.spring.javaweb8S.vo.ProductVO">
		SELECT p.*, c.colName
		FROM bo_product p
		LEFT JOIN bo_collection c
			ON p.colIdx = c.idx
		
		ORDER BY p.idx DESC;
	</select>
	
	<select id="getProductInfo" resultType="com.spring.javaweb8S.vo.ProductVO">
		SELECT * FROM bo_product WHERE idx = #{idx};
	</select>
	
	<select id="getProdOption" resultType="com.spring.javaweb8S.vo.OptionVO">
		SELECT * FROM bo_option WHERE prodIdx = #{idx};
	</select>
	
	<select id="getProductPhotoName" resultType="com.spring.javaweb8S.vo.ProductVO">
		SELECT prodDetail,prodThumbnail FROM bo_product WHERE idx IN
   	<foreach collection="colProdList" item="colProdList" open="(" close=")" separator=",">
   		#{colProdList}
    </foreach>
	</select>
	
	<select id="colProdTotRecCntWithPeriod" resultType="int">
		<if test='searchString == "" and startDate == ""'>
			SELECT COUNT(*) FROM bo_product 
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				WHERE prodStatus = #{sort}
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				WHERE prodOpen = #{sort}
			</if>
			;
		</if>
		<if test='searchString != "" and startDate == ""'>
			SELECT COUNT(*) FROM bo_product WHERE 
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				prodStatus = #{sort} AND 
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				prodOpen = #{sort} AND 
			</if>
			
			${search} LIKE CONCAT('%',#{searchString},'%');
		</if>
		<if test='searchString == "" and startDate != ""'>
			SELECT COUNT(*) FROM bo_product WHERE
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				prodStatus = #{sort} AND 
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				prodOpen = #{sort} AND 
			</if> 
			
			date_format(prodDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate};
		</if>
		<if test='searchString != "" and startDate != ""'>
			SELECT COUNT(*) FROM bo_product WHERE 
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				prodStatus = #{sort} AND 
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				prodOpen = #{sort} AND 
			</if>
			
			${search} LIKE CONCAT('%',#{searchString},'%') AND date_format(prodDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate};
		</if>
	</select>
	
	<select id="getColProdSearchList" resultType="com.spring.javaweb8S.vo.ProductVO">
		<if test='searchString == "" and startDate == ""'>
			SELECT p.*, c.colName
			FROM bo_product p
			LEFT JOIN bo_collection c
				ON p.colIdx = c.idx
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				WHERE p.prodStatus = #{sort}
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				WHERE p.prodOpen = #{sort}
			</if>
			
			ORDER BY p.idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString != "" and startDate == ""'>
			SELECT p.*, c.colName
			FROM bo_product p
			LEFT JOIN bo_collection c
				ON p.colIdx = c.idx
				WHERE 
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				p.prodStatus = #{sort} AND 
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				p.prodOpen = #{sort} AND 
			</if>
			
			p.${search} LIKE CONCAT('%',#{searchString},'%')
			ORDER BY p.idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString == "" and startDate != ""'>
			SELECT p.*, c.colName
			FROM bo_product p
			LEFT JOIN bo_collection c
				ON p.colIdx = c.idx
				
				WHERE 
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				p.prodStatus = #{sort} AND 
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				p.prodOpen = #{sort} AND 
			</if>
			
			date_format(p.prodDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate}
			ORDER BY p.idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString != "" and startDate != ""'>
			SELECT p.*, c.colName
			FROM bo_product p
			LEFT JOIN bo_collection c
				ON p.colIdx = c.idx
				
			WHERE 
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				p.prodStatus = #{sort} AND 
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				p.prodOpen = #{sort} AND 
			</if>			
			
			p.${search} LIKE CONCAT('%',#{searchString},'%') AND date_format(p.prodDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate}
			ORDER BY p.idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
	</select>
	
	<!-- 컬렉션 명으로 검색 -->
	<select id="colProdColNameTotRecCntWithPeriod" resultType="int">
		<if test='searchString == "" and startDate == ""'>
			SELECT COUNT(*) FROM bo_product 
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				WHERE prodStatus = #{sort}
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				WHERE prodOpen = #{sort}
			</if>
			;
		</if>
		<if test='searchString != "" and startDate == ""'>
			SELECT COUNT(*) 
			FROM bo_product p 
			LEFT JOIN bo_collection c 
			ON p.colIdx = c.idx WHERE 
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				p.prodStatus = #{sort} AND 
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				p.prodOpen = #{sort} AND 
			</if>
			
			c.${search} LIKE CONCAT('%',#{searchString},'%');
		</if>
		<if test='searchString == "" and startDate != ""'>
			SELECT COUNT(*) FROM bo_product WHERE
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				prodStatus = #{sort} AND 
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				prodOpen = #{sort} AND 
			</if> 
			
			date_format(prodDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate};
		</if>
		<if test='searchString != "" and startDate != ""'>
			SELECT COUNT(*) 
			FROM bo_product p 
			LEFT JOIN bo_collection c 
			ON p.colIdx = c.idx WHERE 
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				p.prodStatus = #{sort} AND 
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				p.prodOpen = #{sort} AND 
			</if>
			
			c.${search} LIKE CONCAT('%',#{searchString},'%') AND date_format(p.prodDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate};
		</if>
	</select>
		
	<select id="getColNameProdSearchList" resultType="com.spring.javaweb8S.vo.ProductVO">
		<if test='searchString == "" and startDate == ""'>
			SELECT p.*, c.colName
			FROM bo_product p
			LEFT JOIN bo_collection c
				ON p.colIdx = c.idx
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				WHERE p.prodStatus = #{sort}
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				WHERE p.prodOpen = #{sort}
			</if>
			
			ORDER BY p.idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString != "" and startDate == ""'>
			SELECT p.*, c.colName 
			FROM bo_product p 
			LEFT JOIN bo_collection c 
				ON p.colIdx = c.idx WHERE 
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				p.prodStatus = #{sort} AND 
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				p.prodOpen = #{sort} AND 
			</if>
			
			c.${search} LIKE CONCAT('%',#{searchString},'%')
			ORDER BY p.idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString == "" and startDate != ""'>
			SELECT p.*, c.colName 
			FROM bo_product p 
			LEFT JOIN bo_collection c 
				ON p.colIdx = c.idx WHERE 
				
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				p.prodStatus = #{sort} AND 
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				p.prodOpen = #{sort} AND 
			</if>
			
			date_format(p.prodDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate}
			ORDER BY p.idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString != "" and startDate != ""'>
			SELECT p.*, c.colName  
			FROM bo_product p 
			LEFT JOIN bo_collection c 
			ON p.colIdx = c.idx WHERE
			
			<if test='sort != "" and (sort == "판매" or sort == "품절")'>
				p.prodStatus = #{sort} AND 
			</if>
			<if test='sort != "" and (sort == "공개" or sort == "비공개")'>
				p.prodOpen = #{sort} AND 
			</if>			
			
			c.${search} LIKE CONCAT('%',#{searchString},'%') and date_format(p.prodDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate}
			ORDER BY p.idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
	</select>
	
	<select id="orderTotRecCnt" resultType="int">
		SELECT COUNT(*) FROM bo_order;
	</select>
	
	<select id="getOrderList" resultType="com.spring.javaweb8S.vo.OrderVO">
		SELECT o.*, r.refundNum AS refundNum
		FROM bo_order o
	 	LEFT JOIN bo_refund r
	 		ON o.idx = r.orderIdx
	 		
		ORDER BY o.idx DESC LIMIT #{startIndexNo},#{pageSize};
	</select>
	
	<select id="getOrderInfo" resultType="com.spring.javaweb8S.vo.OrderVO">
		SELECT * FROM bo_order WHERE idx = #{idx};
	</select>
	
	<select id="getDeliveryInfo" resultType="com.spring.javaweb8S.vo.DeliveryVO">
		SELECT * FROM bo_delivery WHERE orderIdx = #{idx};
	</select>
	
	<select id="getMemberInfo" resultType="com.spring.javaweb8S.vo.MemberVO">
		SELECT * FROM bo_member WHERE nickname = #{memNickname};
	</select>
	
	<select id="getAddressInfo" resultType="com.spring.javaweb8S.vo.AddressVO">
		SELECT * FROM bo_address WHERE idx = #{addressIdx};
	</select>
	
	<select id="getSubDeliveryInfo" resultType="com.spring.javaweb8S.vo.DeliveryVO">
		SELECT * FROM bo_delivery WHERE orderIdx = #{idx};
	</select>
	
	<select id="getSubscribeInfo" resultType="com.spring.javaweb8S.vo.SubscribeVO">
		SELECT * FROM bo_subscribe WHERE orderIdx = #{idx};
	</select>
	
	<select id="orderTotRecCntWithPeriod" resultType="int">
		<if test='searchString == "" and startDate == ""'>
			SELECT COUNT(*) FROM bo_order 
			
			<if test='sort != "" and sort != "전체"'>
				WHERE orderStatus = #{sort}
			</if>
			;
		</if>
		<if test='searchString != "" and startDate == ""'>
			SELECT COUNT(*) FROM bo_order WHERE 
			
			<if test='sort != "" and sort != "전체"'>
				orderStatus = #{sort} AND 
			</if>
			
			${search} LIKE CONCAT('%',#{searchString},'%');
		</if>
		<if test='searchString == "" and startDate != ""'>
			SELECT COUNT(*) FROM bo_order WHERE
			
			<if test='sort != "" and sort != "전체"'>
				orderStatus = #{sort} AND 
			</if> 
			
			date_format(orderDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate};
		</if>
		<if test='searchString != "" and startDate != ""'>
			SELECT COUNT(*) FROM bo_order WHERE 
			
			<if test='sort != "" and sort != "전체"'>
				orderStatus = #{sort} AND 
			</if>
			
			${search} LIKE CONCAT('%',#{searchString},'%') and date_format(orderDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate};
		</if>
	</select>
	
	<select id="getOrderSearchList" resultType="com.spring.javaweb8S.vo.OrderVO">
		<if test='searchString == "" and startDate == ""'>
			SELECT o.*, r.refundNum AS refundNum
			
			FROM bo_order o
		 	LEFT JOIN bo_refund r
		 		ON o.idx = r.orderIdx
				 
			<if test='sort != "" and sort != "전체"'>
				WHERE o.orderStatus = #{sort}
			</if>
			ORDER BY o.idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		
		
		<if test='searchString != "" and startDate == ""'>
			SELECT o.*, r.refundNum AS refundNum
			
			FROM bo_order o
		 	LEFT JOIN bo_refund r
		 		ON o.idx = r.orderIdx
				 
			WHERE
			
			<if test='sort != "" and sort != "전체"'>
				o.orderStatus = #{sort} AND 
			</if>
			
			o.${search} LIKE CONCAT('%',#{searchString},'%')
			ORDER BY o.idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString == "" and startDate != ""'>
			SELECT o.*, r.refundNum AS refundNum
			
			FROM bo_order o
		 	LEFT JOIN bo_refund r
		 		ON o.idx = r.orderIdx
				 
			WHERE 
			
			<if test='sort != "" and sort != "전체"'>
				o.orderStatus = #{sort} AND 
			</if> 
			
			date_format(o.orderDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate}
			ORDER BY o.idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString != "" and startDate != ""'>
			SELECT o.*, r.refundNum AS refundNum
			
			FROM bo_order o
		 	LEFT JOIN bo_refund r
		 		ON o.idx = r.orderIdx
				 
			WHERE 
			
			<if test='sort != "" and sort != "전체"'>
				o.orderStatus = #{sort} AND 
			</if>
			
			o.${search} LIKE CONCAT('%',#{searchString},'%') and date_format(o.orderDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate}
			ORDER BY o.idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
	</select>
	
	<!-- 송장으로 검색 -->
	<select id="orderWithInvoiceTotRecCntWithPeriod" resultType="com.spring.javaweb8S.vo.OrderVO">
		<if test='searchString == "" and startDate == ""'>
			SELECT * FROM bo_order 
			
			<if test='sort != "" and sort != "전체"'>
				WHERE orderStatus = #{sort}
			</if>
			GROUP BY orderCode;
		</if>
		<if test='searchString != "" and startDate == ""'>
			SELECT *   
			FROM bo_order o
			LEFT JOIN bo_delivery d
			ON o.idx = d.orderIdx
			WHERE 
			<if test='sort != "" and sort != "전체"'>
				o.orderStatus = #{sort} AND 
			</if>
			
			d.${search} LIKE CONCAT('%',#{searchString},'%')
			GROUP BY o.orderCode;
		</if>
		<if test='searchString == "" and startDate != ""'>
			SELECT * FROM bo_order WHERE
			
			<if test='sort != "" and sort != "전체"'>
				orderStatus = #{sort} AND 
			</if> 
			
			date_format(orderDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate}
			GROUP BY orderCode;
		</if>
		<if test='searchString != "" and startDate != ""'>
			SELECT *  
			FROM bo_order o
			LEFT JOIN bo_delivery d
			ON o.idx = d.orderIdx
			WHERE  
			
			<if test='sort != "" and sort != "전체"'>
				o.orderStatus = #{sort} AND 
			</if>
			
			d.${search} LIKE CONCAT('%',#{searchString},'%') AND date_format(o.orderDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate}
			GROUP BY o.orderCode;
		</if>
	</select>
	
	<select id="getOrderWithInvoiceSearchList" resultType="com.spring.javaweb8S.vo.OrderVO">
		<if test='searchString == "" and startDate == ""'>
			SELECT o.*, r.refundNum AS refundNum
			
			FROM bo_order o
		 	LEFT JOIN bo_refund r
		 		ON o.idx = r.orderIdx
				 
			<if test='sort != "" and sort != "전체"'>
				WHERE o.orderStatus = #{sort}
			</if>
			GROUP BY o.orderCode
			ORDER BY o.idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString != "" and startDate == ""'>
			SELECT o.*, r.refundNum AS refundNum  
			FROM bo_order o
			LEFT JOIN bo_delivery d
				ON o.idx = d.orderIdx

		 	LEFT JOIN bo_refund r
		 		ON o.idx = r.orderIdx
				 
			WHERE 
			<if test='sort != "" and sort != "전체"'>
				o.orderStatus = #{sort} AND 
			</if>
			
			d.${search} LIKE CONCAT('%',#{searchString},'%')
			GROUP BY o.orderCode 
			ORDER BY o.idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString == "" and startDate != ""'>
			SELECT o.*, r.refundNum AS refundNum
			
			FROM bo_order o
		 	LEFT JOIN bo_refund r
		 		ON o.idx = r.orderIdx
				 
			WHERE 
			
			<if test='sort != "" and sort != "전체"'>
				o.orderStatus = #{sort} AND 
			</if> 
			
			date_format(o.orderDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate}
			GROUP BY o.orderCode
			ORDER BY o.idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString != "" and startDate != ""'>
			SELECT o.*, r.refundNum AS refundNum  
			FROM bo_order o
			LEFT JOIN bo_delivery d
				ON o.idx = d.orderIdx
		 	LEFT JOIN bo_refund r
		 		ON o.idx = r.orderIdx
		 		
			WHERE   
			
			<if test='sort != "" and sort != "전체"'>
				o.orderStatus = #{sort} AND 
			</if>
			
			d.${search} LIKE CONCAT('%',#{searchString},'%') AND date_format(o.orderDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate}
			GROUP BY o.orderCode
			ORDER BY o.idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
	</select>
	
	<select id="getRefundInfo" resultType="com.spring.javaweb8S.vo.RefundVO">
		SELECT * FROM bo_refund WHERE orderIdx = #{idx};
	</select>
	
	<select id="memberListTotRecCnt" resultType="int">
		<if test='searchString == ""'>
			SELECT COUNT(*) FROM bo_member 
			<if test='sort != "" and sort != "전체"'>
				WHERE memberDel = #{sort}
			</if>
			;
		</if>
		<if test='searchString != ""'>
			SELECT COUNT(*) FROM bo_member WHERE 
			<if test='sort != "" and sort != "전체"'>
				memberDel = #{sort} AND
			</if>
			${search} LIKE CONCAT('%',#{searchString},'%');
		</if>
	</select>
	
	<select id="getMemberList" resultType="com.spring.javaweb8S.vo.MemberVO">
		<if test='searchString == ""'>
			SELECT * FROM bo_member  
			<if test='sort != "" and sort != "전체"'>
				WHERE memberDel = #{sort}
			</if>
			ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString != ""'>
			SELECT * FROM bo_member WHERE 
			<if test='sort != "" and sort != "전체"'>
				memberDel = #{sort} AND
			</if>
			${search} LIKE CONCAT('%',#{searchString},'%')
			ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
	</select>
	
	<select id="noticeListTotRecCnt" resultType="int">
		<if test='searchString == ""'>
			SELECT COUNT(*) FROM bo_notice;
		</if>
		<if test='searchString != ""'>
			SELECT COUNT(*) FROM bo_notice WHERE 
			${search} LIKE CONCAT('%',#{searchString},'%');
		</if>
	</select>
	
	<select id="getNoticeSearchList" resultType="com.spring.javaweb8S.vo.NoticeVO">
		<if test='searchString == ""'>
			SELECT * FROM bo_notice ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString != ""'>
			SELECT * FROM bo_notice WHERE 
			${search} LIKE CONCAT('%',#{searchString},'%') ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
	</select>
	
	<select id="getMemberAddressList" resultType="com.spring.javaweb8S.vo.AddressVO">
		SELECT * FROM bo_address WHERE memNickname = #{nickname} ORDER BY addressDel ASC, idx DESC;
	</select>
	
	<select id="getMemberPointList" resultType="com.spring.javaweb8S.vo.PointVO">
		SELECT *, (SELECT type FROM bo_order WHERE idx = p.orderIdx) AS type  
		FROM bo_point p
		WHERE memNickname = #{nickname} ORDER BY idx DESC;
	</select>
	
	<select id="getMemberPointUseList" resultType="com.spring.javaweb8S.vo.PointUseVO">
		SELECT *, (SELECT type FROM bo_order WHERE idx = p.orderIdx) AS type  
		FROM bo_pointUse p
		WHERE memNickname = #{nickname} ORDER BY idx DESC;
	</select>
	
	<select id="getMemberBooksletterList" resultType="com.spring.javaweb8S.vo.BooksletterVO">
		SELECT * FROM bo_booksletter WHERE memNickname = #{nickname} ORDER BY idx DESC;
	</select>
	
	<select id="getMemberSubscribeList" resultType="com.spring.javaweb8S.vo.SubscribeVO">
		SELECT s.*, o.prodName AS prodName
		FROM bo_subscribe s
		LEFT JOIN bo_order o
			ON s.orderIdx = o.idx
		
		WHERE s.memNickname = #{nickname} ORDER BY idx DESC;
	</select>
	
	<select id="subscribeTotRecCntWithPeriod" resultType="int">
		<if test='searchString == "" and startDate == ""'>
			SELECT COUNT(*) FROM bo_subscribe
			
			<if test='sort != "" and sort != "전체"'>
				WHERE subStatus = #{sort}
			</if>
			;
		</if>
		<if test='searchString != "" and startDate == ""'>
			SELECT COUNT(*) FROM bo_subscribe WHERE 
			
			<if test='sort != "" and sort != "전체"'>
				subStatus = #{sort} AND 
			</if>
			
			${search} LIKE CONCAT('%',#{searchString},'%');
		</if>
		<if test='searchString == "" and startDate != ""'>
			SELECT COUNT(*) FROM bo_subscribe WHERE
			
			<if test='sort != "" and sort != "전체"'>
				subStatus = #{sort} AND 
			</if> 
			
			date_format(subStartDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate};
		</if>
		<if test='searchString != "" and startDate != ""'>
			SELECT COUNT(*) FROM bo_subscribe WHERE 
			
			<if test='sort != "" and sort != "전체"'>
				subStatus = #{sort} AND 
			</if>
			
			${search} LIKE CONCAT('%',#{searchString},'%') and date_format(subStartDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate};
		</if>
	</select>
	
	<select id="getSubscribeSearchList" resultType="com.spring.javaweb8S.vo.SubscribeVO">
		<if test='searchString == "" and startDate == ""'>
	 		SELECT s.*, o.prodName AS prodName, o.maIdx AS maIdx
	 		
			FROM bo_subscribe s
			LEFT JOIN bo_order o
				ON s.orderIdx = o.idx
				 
			<if test='sort != "" and sort != "전체"'>
				WHERE s.subStatus = #{sort}
			</if>
			ORDER BY s.idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		
		<if test='searchString != "" and startDate == ""'>
			SELECT s.*, o.prodName AS prodName, o.maIdx AS maIdx
	 		
			FROM bo_subscribe s
			LEFT JOIN bo_order o
				ON s.orderIdx = o.idx
				 
			WHERE
			
			<if test='sort != "" and sort != "전체"'>
				s.subStatus = #{sort} AND 
			</if>
			
			s.${search} LIKE CONCAT('%',#{searchString},'%')
			ORDER BY s.idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString == "" and startDate != ""'>
			SELECT s.*, o.prodName AS prodName, o.maIdx AS maIdx
	 		
			FROM bo_subscribe s
			LEFT JOIN bo_order o
				ON s.orderIdx = o.idx
				 
			WHERE 
			
			<if test='sort != "" and sort != "전체"'>
				s.subStatus = #{sort} AND 
			</if> 
			
			date_format(s.subStartDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate}
			ORDER BY s.idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString != "" and startDate != ""'>
			SELECT s.*, o.prodName AS prodName, o.maIdx AS maIdx 
	 		
			FROM bo_subscribe s
			LEFT JOIN bo_order o
				ON s.orderIdx = o.idx
				 
			WHERE 
			
			<if test='sort != "" and sort != "전체"'>
				s.subStatus = #{sort} AND 
			</if>
			
			s.${search} LIKE CONCAT('%',#{searchString},'%') and date_format(s.subStartDate, '%Y-%m-%d') BETWEEN #{startDate} AND #{endDate}
			ORDER BY s.idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
	</select>
	
	<select id="refundListTotRecCnt" resultType="int">
		<if test='searchString == ""'>
			SELECT COUNT(*) FROM bo_refund
			
			<if test='sort != "" and sort != "전체"'>
				<if test='sort.contains("반품")'>
					WHERE refundStatus = #{sort}
				</if>
				<if test='!sort.contains("반품")'>
					WHERE refundReason = #{sort}
				</if>
			</if>
			;
		</if>
		<if test='searchString != ""'>
			SELECT COUNT(*) FROM bo_refund WHERE 
			
			<if test='sort != "" and sort != "전체"'>
				<if test='sort.contains("반품")'>
					refundStatus = #{sort} AND
				</if>
				<if test='!sort.contains("반품")'>
					refundReason = #{sort} AND
				</if>
			</if>
			
			${search} LIKE CONCAT('%',#{searchString},'%');
		</if>
	</select>
	
	<select id="getRefundSearchList" resultType="com.spring.javaweb8S.vo.RefundVO">
		<if test='searchString == ""'>
			SELECT r.*, o.prodName AS prodName
			FROM bo_refund r
			LEFT JOIN bo_order o
				ON r.orderIdx = o.idx
			
			<if test='sort != "" and sort != "전체"'>
				<if test='sort.contains("반품")'>
					WHERE r.refundStatus = #{sort}
				</if>
				<if test='!sort.contains("반품")'>
					WHERE r.refundReason = #{sort}
				</if>
			</if>
			ORDER BY r.idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString != ""'>
			SELECT r.*, o.prodName AS prodName
			FROM bo_refund r
			LEFT JOIN bo_order o
				ON r.orderIdx = o.idx
				
			WHERE 
			
			<if test='sort != "" and sort != "전체"'>
				<if test='sort.contains("반품")'>
					r.refundStatus = #{sort} AND
				</if>
				<if test='!sort.contains("반품")'>
					r.refundReason = #{sort} AND
				</if>
			</if>
			
			r.${search} LIKE CONCAT('%',#{searchString},'%') ORDER BY r.idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
	</select>
	
	<select id="askListTotRecCnt" resultType="int">
		<if test='searchString == ""'>
			SELECT COUNT(*) FROM bo_ask
			
			<if test='sort != "" and sort != "전체"'>
				WHERE category = #{sort}
			</if>
			;
		</if>
		<if test='searchString != ""'>
			SELECT COUNT(*) FROM bo_ask WHERE 
			
			<if test='sort != "" and sort != "전체"'>
				category = #{sort} AND
			</if>
			${search} LIKE CONCAT('%',#{searchString},'%');
		</if>
	</select>
	
	<select id="getAskSearchList" resultType="com.spring.javaweb8S.vo.AskVO">
		<if test='searchString == ""'>
			SELECT * FROM bo_ask
			
			<if test='sort != "" and sort != "전체"'>
				WHERE category = #{sort}
			</if>
			ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
		<if test='searchString != ""'>
			SELECT * FROM bo_ask WHERE 
			
			<if test='sort != "" and sort != "전체"'>
				category = #{sort} AND
			</if>
			${search} LIKE CONCAT('%',#{searchString},'%') ORDER BY idx DESC LIMIT #{startIndexNo},#{pageSize};
		</if>
	</select>
	
	<select id="getNoticeInfo" resultType="com.spring.javaweb8S.vo.NoticeVO">
		SELECT * FROM bo_notice WHERE idx = #{idx};
	</select>
	
	<select id="getMagazineStat" resultType="int">
		SELECT COUNT(*) FROM bo_subscribe WHERE subStatus = #{subStatus};
	</select>
	
	<select id="getBooksletterStat" resultType="int">
		SELECT COUNT(*) FROM bo_booksletter WHERE booksletterStatus = #{booksletterStatus};
	</select>
	
	<select id="getOrderStat" resultType="int">
		SELECT COUNT(*) FROM bo_order WHERE orderStatus = #{orderStatus};
	</select>
	
	<select id="getCommunityStat" resultType="int">
		<if test="flag != null and flag == '기록'">
			SELECT COUNT(*) FROM bo_reflection WHERE refDate BETWEEN date_add(now(), interval -1 month) AND NOW();
		</if>
		<if test="flag != null and flag == '문장수집'">
			SELECT COUNT(*) FROM bo_inspired WHERE insDate BETWEEN date_add(now(), interval -1 month) AND NOW();
		</if>
	</select>
	
	<select id="getAskStat" resultType="int">
		<if test="category != null and category == '커뮤니티'">
			SELECT COUNT(*) FROM bo_ask WHERE answeredAsk = "답변전" AND category = "커뮤니티";
		</if>
		<if test="category != null and category != '커뮤니티'">
			SELECT COUNT(*) FROM bo_ask WHERE answeredAsk = "답변전" AND category != "커뮤니티";
		</if>
	</select>
	
	<select id="getReportStat" resultType="int">
		SELECT COUNT(*) FROM bo_report WHERE reportCategory = #{reportCategory} AND reportDone = "처리 전";
	</select>
	
	<select id="getBooksletterSearchList" resultType="com.spring.javaweb8S.vo.BooksletterVO">
		<if test='searchString != ""'>
			SELECT * FROM bo_booksletter WHERE 
			<if test='sort != "" and sort != "전체"'>
				<if test='sort.contains("구독")'>
					booksletterStatus = #{sort} AND
				</if>
				<if test='!sort.contains("구독")'>
					<if test='sort != "" and sort == "회원"'>
						memNickname IS NOT NULL AND
					</if>
					<if test='sort != "" and sort != "회원"'>
						memNickname IS NULL AND
					</if>
				</if>
			</if>
			${search} LIKE CONCAT('%',#{searchString},'%') 
			ORDER BY booksletterStatus, idx DESC;
		</if>
		<if test='searchString == ""'>
			SELECT * FROM bo_booksletter 
			<if test='sort != "" and sort != "전체"'>
				<if test='sort.contains("구독")'>
					WHERE booksletterStatus = #{sort}
				</if>
				<if test='!sort.contains("구독")'>
					<if test='sort != "" and sort == "회원"'>
						WHERE memNickname IS NOT NULL
					</if>
					<if test='sort != "" and sort != "회원"'>
						WHERE memNickname IS NULL
					</if>
				</if>
			</if>
			ORDER BY booksletterStatus, idx DESC;
		</if>
	</select>
	
	<select id="getReportSearchList" resultType="com.spring.javaweb8S.vo.ReportVO">
		SELECT * FROM bo_report WHERE 
		<if test='sort != "" and sort != "전체"'>
			<if test='sort.contains("처리")'>
				reportDone = #{sort} AND
			</if>
			<if test='!sort.contains("처리")'>
				reportCategory = #{sort} AND
			</if>
		</if>
		${search} LIKE CONCAT('%',#{searchString},'%') 
		ORDER BY reportDone, idx DESC;
	</select>
	
	<select id="getReportInfo" resultType="com.spring.javaweb8S.vo.ReportVO">
		SELECT * FROM bo_report WHERE idx = #{idx};
	</select>
	
	<select id="getReflectionInfo" resultType="com.spring.javaweb8S.vo.ReflectionVO">
		SELECT * FROM bo_reflection WHERE idx = #{originIdx};
	</select>
	
	<select id="getReplyInfo" resultType="com.spring.javaweb8S.vo.ReplyVO">
		SELECT * FROM bo_reply WHERE idx = #{originIdx};
	</select>
	
	<select id="getInspiredInfo" resultType="com.spring.javaweb8S.vo.InspiredVO">
		SELECT * FROM bo_inspired WHERE idx = #{originIdx};
	</select>
	
	<select id="getMemberInfoWithIdx" resultType="com.spring.javaweb8S.vo.MemberVO">
		SELECT * FROM bo_member WHERE idx = #{originIdx};
	</select>
	
	<select id="getOriginNickname" resultType="String">
		SELECT nickname FROM bo_member WHERE idx = #{originIdx};
	</select>
	
	<select id="getOriginRefIdx" resultType="String">
		SELECT refIdx FROM bo_reply WHERE idx = #{originIdx};
	</select>
	
	<select id="getChartStat" resultType="com.spring.javaweb8S.vo.ChartVO">
		SELECT SUM(num) AS cnt, DATE_FORMAT(date_add(now(), interval -#{term} month),'%m') AS date FROM bo_order 
		WHERE DATE_FORMAT(orderDate,'%Y-%m') = DATE_FORMAT(date_add(now(), interval -#{term} month),'%Y-%m') AND type = #{type};
	</select>
	
	<select id="getSubChartStat" resultType="com.spring.javaweb8S.vo.SubChartVO">
		SELECT date_list.subDate, COALESCE(COUNT(s.subStartDate), 0) AS subNum
		FROM (
		    SELECT DATE_SUB(CURDATE(), INTERVAL 5 WEEK) + INTERVAL (a.a) WEEK AS subDate
		    FROM (SELECT 0 AS a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) AS a
		
		    WHERE DATE_SUB(CURDATE(), INTERVAL 5 WEEK) + INTERVAL (a.a) WEEK <![CDATA[<=]]> CURDATE()
		) AS date_list
		LEFT JOIN bo_subscribe s ON DATE(s.subStartDate) <![CDATA[<=]]> date_list.subDate AND s.subStatus = '구독중'
		
		GROUP BY date_list.subDate
		ORDER BY date_list.subDate;
	</select>
	
	<select id="getLetterChartStat" resultType="com.spring.javaweb8S.vo.SubChartVO">
		SELECT date_list.subDate, COALESCE(COUNT(b.booksletterDate), 0) AS letterNum
		FROM (
		    SELECT DATE_SUB(CURDATE(), INTERVAL 5 WEEK) + INTERVAL (a.a) WEEK AS subDate
		    FROM (SELECT 0 AS a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) AS a
		
		    WHERE DATE_SUB(CURDATE(), INTERVAL 5 WEEK) + INTERVAL (a.a) WEEK <![CDATA[<=]]> CURDATE()
		) AS date_list
		LEFT JOIN bo_booksletter b ON DATE(b.booksletterDate) <![CDATA[<=]]> date_list.subDate AND b.booksletterStatus = '구독중'
		
		GROUP BY date_list.subDate
		ORDER BY date_list.subDate;
	</select>
	
	<select id="getProdChartStat" resultType="com.spring.javaweb8S.vo.ProdAskChartVO">
		SELECT SUM(prodSaleQuantity) AS salesNum, prodName FROM bo_product GROUP BY prodName ORDER BY SUM(prodSaleQuantity) DESC LIMIT 5;
	</select>
	
	<select id="getAskChartStat" resultType="com.spring.javaweb8S.vo.ProdAskChartVO">
		SELECT COALESCE(COUNT(idx), 0) AS askNum, category FROM bo_ask GROUP BY category ORDER BY category DESC;
	</select>
	
	<select id="getGameStat" resultType="com.spring.javaweb8S.vo.GameStatVO">
	 SELECT SUM(totPoint) AS totPoint,  
		<if test='game != null and game == "bo_dice"'>
		 CONCAT(ROUND((SUM(success) / (COUNT(*) * 3)) * 100, 1), '%') AS successPercentage
		</if>
		<if test='game != null and game == "bo_roulette"'>
		 CONCAT(ROUND((SUM(success) / (COUNT(*) * 2)) * 100, 1), '%') AS successPercentage
		</if>
	 FROM ${game};
	</select>
	
	<insert id="memberDefaultPhotoInsert">
		INSERT INTO bo_defaultPhoto VALUES (default, #{vo.photoName}, #{vo.memo}, default); 
	</insert>

	<insert id="setProverb">
		INSERT INTO bo_proverb VALUES (default, #{vo.content}, #{vo.origin}); 
	</insert>
	
	<insert id="setBook">
		INSERT INTO bo_book VALUES(default,#{vo.title},#{vo.contents},#{vo.url},#{vo.isbn},#{vo.datetime},#{vo.authors},#{vo.publisher},
		#{vo.translators},#{vo.price},#{vo.sale_price},#{vo.thumbnail},#{vo.status},default,default);
	</insert>
	
 	<insert id="setMagazineInsert" parameterType="com.spring.javaweb8S.vo.MagazineVO">
 		<if test='vo.maType != null and vo.maType=="정기 구독"'>
			INSERT INTO bo_magazine VALUES(default,#{vo.maCode},#{vo.maType},#{vo.maTitle},#{vo.maPrice},#{vo.maThumbnail},#{vo.maDetail},default,default,default,default,default);
		</if>
		<if test='vo.maType != null and vo.maType=="매거진"'>
			INSERT INTO bo_magazine VALUES(default,#{vo.maCode},#{vo.maType},#{vo.maTitle},#{vo.maPrice},#{vo.maThumbnail},#{vo.maDetail},#{vo.maDate},#{vo.maStock},#{vo.maSaleQuantity},default,default);
		</if> 
	</insert>	
	
	<insert id="setColCategoryInsert">
		INSERT INTO bo_collection VALUES(default,#{vo.colName},#{vo.colDetail},#{vo.colThumbnail},default,default);
	</insert>
	
	<insert id="setProdInsert">
		<if test="vo.bookTitle != null">
			INSERT INTO bo_product VALUES(default,#{vo.colIdx},
			
			(SELECT idx FROM bo_book WHERE title = #{vo.bookTitle} LIMIT 1), #{vo.bookTitle},
			#{vo.prodCode},#{vo.prodName},#{vo.prodPrice},#{vo.prodReason},#{vo.prodThumbnail},#{vo.prodDetail},default,default,default,#{vo.prodStatus},default);
		</if>
		<if test="vo.bookTitle == null">
			INSERT INTO bo_product(idx,colIdx,prodCode,prodName,prodPrice,prodReason,prodThumbnail,prodDetail,prodDate,prodSaleQuantity,prodSave,prodStatus,prodOpen)
			VALUES(default,#{vo.colIdx},
			#{vo.prodCode},#{vo.prodName},#{vo.prodPrice},#{vo.prodReason},#{vo.prodThumbnail},#{vo.prodDetail},default,default,default,#{vo.prodStatus},default);
		</if>
	</insert>
	
	<insert id="setProdOpInsert" parameterType="java.util.ArrayList">
		INSERT INTO bo_option VALUES
		<foreach item="item" index="index" collection="optionList" separator=",">
    	(default, (SELECT idx FROM bo_product WHERE prodCode = #{prodCode}), #{item.opName}, #{item.opPrice}, #{item.opStock})       
    </foreach>
	</insert>
	
	<insert id="setOrderPointInsert">
		INSERT INTO bo_point VALUES
		(default, #{vo.memNickname}, #{vo.orderIdx}, (SELECT ROUND(#{point} * 0.05) FROM dual), #{pointReason}, default);
	</insert>
	
	<insert id="setPointInsert">
		INSERT INTO bo_point VALUES
		(default, #{vo.memNickname}, #{vo.orderIdx}, #{vo.subRefundPoint}, #{pointReason}, default);
	</insert>
	
	<insert id="setNoticeInsert">
		INSERT INTO bo_notice VALUES 
		(default, #{vo.category}, #{vo.noticeTitle}, #{vo.noticeContent}, default, default, #{vo.important}, #{vo.noticeOpen});
	</insert>
	
	<update id="setChangeMemberPhotos">
		UPDATE bo_member SET memPhoto = default WHERE memPhoto IN
   	<foreach collection="defaultPhotoList" item="defaultPhotoList" open="(" close=")" separator=",">
   		#{defaultPhotoList}
    </foreach>
	</update>
	
	<update id="setUpdateProverb">
		UPDATE bo_proverb SET content = #{vo.content}, origin = #{vo.origin} WHERE idx = #{vo.idx};
	</update>
	
 	<update id="setMagazineOpenUpdate">
		UPDATE bo_magazine SET maOpen = #{maOpen} WHERE idx = #{idx};
	</update>
	
	<update id="setMagazineUpdate" parameterType="com.spring.javaweb8S.vo.MagazineVO">
		UPDATE bo_magazine SET maType = #{vo.maType}, maTitle = #{vo.maTitle}, maPrice = #{vo.maPrice},  
 		<if test='vo.maThumbnail != null'>maThumbnail = #{vo.maThumbnail}, </if>
 		<if test='vo.maDetail != null'>maDetail = #{vo.maDetail}, </if>
 		<if test='vo.maType != null and vo.maType=="정기 구독"'>maDate = default, </if>
		<if test='vo.maType != null and vo.maType=="매거진"'>maDate = #{vo.maDate}, </if> 
		maStock = #{vo.maStock} WHERE idx = #{vo.idx};
	</update>
	
 	<update id="setColCategoryOpenUpdate">
		UPDATE bo_collection SET colOpen = #{colOpen} WHERE idx = #{idx};
	</update>
	
	<update id="setUpdateColCategory">
		UPDATE bo_collection SET colName = #{vo.colName}, colDetail = #{vo.colDetail}, colDate = #{vo.colDate} WHERE idx = #{vo.idx};
	</update>
	
	<update id="setColCategorythumbUpdate">
		UPDATE bo_collection set colThumbnail = #{vo.colThumbnail} WHERE idx = #{vo.idx};
	</update>
	
	<update id="setColProdOpenUpdate">
		UPDATE bo_product SET prodOpen = #{prodOpen} WHERE idx = #{idx};
	</update>
	
	<update id="setProdUpdate" parameterType="com.spring.javaweb8S.vo.ProductVO">
		UPDATE bo_product SET prodName = #{vo.prodName}, prodPrice = #{vo.prodPrice}, prodReason = #{vo.prodReason}
		<if test='vo.prodThumbnail != null'>, prodThumbnail = #{vo.prodThumbnail}</if>
		<if test='vo.prodDetail != null'>, prodDetail = #{vo.prodDetail}</if>
		WHERE idx = #{vo.idx};
	</update>
	
	<update id="setProdOpUpdate" parameterType="java.util.ArrayList">
		<foreach item="item" index="index" collection="optionList">
			UPDATE bo_option SET 
    	opName = #{item.opName}, opPrice = #{item.opPrice}, opStock = #{item.opStock} WHERE idx = #{item.idx};     
    </foreach>
	</update>
	
	<update id="setProdStatusUpdate">
		UPDATE bo_product SET prodStatus = #{prodStatus} WHERE idx = #{idx};
	</update>
	
	<update id="setMemberForcedDelete">
		UPDATE bo_member SET memberDel = "탈퇴", memberDelReason = #{memberDelReason} WHERE idx = #{idx};
	</update>
	
	<update id="setAddressForcedDelete">
		UPDATE bo_address SET addressDel = "삭제" WHERE idx = #{idx};
	</update>
	
	<update id="setSubscribeCancelUpdate">
		UPDATE bo_subscribe SET subStatus = "구독취소", subRefund = #{vo.subRefund}, subRefundPoint = #{vo.subRefundPoint} WHERE idx = #{vo.idx};
	</update>
	
	<update id="setMemPointUpdate">
		UPDATE bo_member SET point = point + #{vo.subRefundPoint} WHERE nickname = #{vo.memNickname};
	</update>
	
	<update id="setNoticeUpdate">
		UPDATE bo_notice SET category = #{vo.category}, noticeTitle = #{vo.noticeTitle}, noticeContent = #{vo.noticeContent}, important = #{vo.important},
		noticeOpen = #{vo.noticeOpen} WHERE idx = #{vo.idx};
	</update> 
	
	<update id="setReportReplyInsert">
		UPDATE bo_report SET reply = #{reply}, reportDone = "처리완료" WHERE idx = #{idx};
	</update> 
	
	<delete id="memberDefaultPhotoDelete">
		DELETE FROM bo_defaultPhoto WHERE 1=1 AND 
		photoName IN
    <foreach collection="defaultPhotoList" item="defaultPhotoList" open="(" close=")" separator=",">
   		#{defaultPhotoList}
    </foreach>
	</delete>
	
	<delete id="setProverbDelete">
		DELETE FROM bo_proverb WHERE idx IN
    <foreach collection="proverbList" item="proverbList" open="(" close=")" separator=",">
   		#{proverbList}
    </foreach>
	</delete>
	
	<delete id="setBookDelete">
		DELETE FROM bo_book WHERE idx IN 
    <foreach collection="bookList" item="bookList" open="(" close=")" separator=",">
   		#{bookList}
    </foreach>
	</delete>

	<delete id="setMagazineDelete">
		DELETE FROM bo_magazine WHERE idx IN
    <foreach collection="magazineList" item="magazineList" open="(" close=")" separator=",">
   		#{magazineList}
    </foreach>
	</delete>
	
	<delete id="setColCategoryDelete">
		DELETE FROM bo_collection WHERE colThumbnail IN 
    <foreach collection="colCategoryList" item="colCategoryList" open="(" close=")" separator=",">
   		#{colCategoryList}
    </foreach>
	</delete>
	
	<delete id="setProdOptionDelete">
		DELETE FROM bo_option WHERE idx = #{idx};
	</delete>
	
	<delete id="setColProdDelete">
		DELETE FROM bo_product WHERE idx IN 
    <foreach collection="colProdList" item="colProdList" open="(" close=")" separator=",">
   		#{colProdList}
    </foreach>
	</delete>
	
	<delete id="setNoticeDelete">
		DELETE FROM bo_notice WHERE idx = #{idx};
	</delete>
	
</mapper>